(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"20a0":function(t,e,n){"use strict";var a={"uni-card":()=>n.e("components/uni-card/uni-card").then(n.bind(null,"704c")),"uni-tag":()=>n.e("components/uni-tag/uni-tag").then(n.bind(null,"1c8b")),"uni-drawer":()=>n.e("components/uni-drawer/uni-drawer").then(n.bind(null,"81de")),"uni-section":()=>n.e("components/uni-section/uni-section").then(n.bind(null,"1060")),"uni-pagination":()=>n.e("components/uni-pagination/uni-pagination").then(n.bind(null,"3cf4")),"uni-fab":()=>n.e("components/uni-fab/uni-fab").then(n.bind(null,"56f2")),"chunLei-modal":()=>n.e("components/chunLei-modal/chunLei-modal").then(n.bind(null,"b1d2"))},i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a})},"29ea":function(t,e,n){"use strict";n.r(e);var a=n("20a0"),i=n("e9c6");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("e076");var u,r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);e["default"]=s.exports},"58db":function(t,e,n){"use strict";(function(t){n("55b0"),n("921b");a(n("66fd"));var e=a(n("29ea"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},7176:function(t,e,n){},b82e:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return n.e("components/chunLei-modal/chunLei-modal").then(n.bind(null,"b1d2"))},o=function(){return n.e("components/uni-section/uni-section").then(n.bind(null,"1060"))},u=function(){return n.e("components/uni-fab/uni-fab").then(n.bind(null,"56f2"))},r=function(){return n.e("components/uni-card/uni-card").then(n.bind(null,"704c"))},s=function(){return n.e("components/uni-tag/uni-tag").then(n.bind(null,"1c8b"))},c=function(){return n.e("components/uni-pagination/uni-pagination").then(n.bind(null,"3cf4"))},d={components:{uniCard:r,uniTag:s,uniFab:u,uniPagination:c,uniSection:o,chunLeiModal:i},data:function(){return{weather:{code:0,realtime:{temperature:"",humidity:"",info:"",wid:"",direct:"",power:"",aqi:""},future:{date:"",temperature:"",weather:"",wid:{day:"",night:""},direct:""}},location:"",model_value:!1,model_type:"default",model_data:{},model_defaultData:{title:"注销",content:"是否退出?",cancelText:"取消",confirmColor:"#3CC51F"},showMyInfo:!1,showVersion:!1,add_title:"uni-fab",add_directionStr:"垂直",add_horizontal:"left",add_vertical:"bottom",add_direction:"vertical",add_pattern:{color:"#7A7E83",backgroundColor:"#fff",selectedColor:"#007AFF",buttonColor:"#007AFF"},add_content:[{iconPath:"/static/component.png",selectedIconPath:"/static/images/newMsg.png",text:"写文章",active:!0},{iconPath:"/static/api.png",selectedIconPath:"/static/images/user.png",text:"我的",active:!0},{iconPath:"/static/template.png",selectedIconPath:"/static/images/version.png",text:"版本信息",active:!0}],imageUrlsArr:[],msgArr:[],user:{username:"zjh",nickName:""},JSESSIONID:"",totalPage:""}},onLoad:function(t){var e=this;setTimeout(function(){e.userStatus()},200)},onPullDownRefresh:function(){var t=this;setTimeout(function(){t.userStatus()},500)},methods:{cancel:function(){},onConfirm:function(t){var e=this;switch(this.model_type){case"default":e.userLogout();break}},tapBtn:function(t){switch(this.model_type=t,this.model_value=!this.model_value,this.model_type){case"default":this.model_data=this.model_defaultData;break}},userLogout:function(){var e=this;t.showLoading({title:"正在注销~"}),t.request({url:"http://zjhwork.xyz:8080/userLogOut",success:function(){t.hideLoading(),e.userStatus()}})},closeDrawer:function(t){"left"===t?this.showMyInfo=!1:this.showVersion=!1},add_trigger:function(e){1==e.index?this.showMyInfo=!0:2==e.index?this.showVersion=!0:t.navigateTo({url:"../details/details?jsd="+this.JSESSIONID})},getTotallyPage:function(){var e=this;t.request({url:"http://zjhwork.xyz:8080/msgCount",success:function(t){e.totalPage=t.data}})},changePage:function(t){this.loadingMsg(t.current)},setJSESSIONID:function(t){this.JSESSIONID=t},pressImg:function(e){t.previewImage({current:e,urls:this.imageUrlsArr,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){a("log","选中了第"+(t.tapIndex+1)+"个按钮,第"+(t.index+1)+"张图片"," at pages\\index\\index.vue:344")},fail:function(t){a("log",t.errMsg," at pages\\index\\index.vue:347")}}})},userStatus:function(){t.showLoading({title:"正在加载"});var e=this;t.request({url:"http://zjhwork.xyz:8080/status",success:function(n){1==n.data.code?(e.user.username=n.data.result[0].username,e.loadingMsg(1)):(t.hideLoading(),e.toLogin()),t.stopPullDownRefresh()}})},getLocation:function(){var e=this;e.weather.code=0,t.getLocation({type:"wgs84",success:function(n){t.request({url:"http://api.map.baidu.com/geocoder/v2/?callback=renderReverse&location="+n.latitude+","+n.longitude+"&output=json&pois=1&ak=lwLh9Z2DLncf1uqymwtQTuAIYWwISgP1",success:function(t){e.loadingWeather(JSON.parse(t.data.substr(29,t.data.length-30)).result.addressComponent.city),e.location=JSON.parse(t.data.substr(29,t.data.length-30)).result.formatted_address}})}})},loadingWeather:function(e){var n=this;t.request({url:"http://apis.juhe.cn/simpleWeather/query?city="+e.substr(0,e.length-1)+"&key=93115b9570227d60a64ddabb4ad2123f",success:function(e){null==e.data.result?t.showToast({title:"今日天气api已经超过次数啦",icon:"none",duration:1e3,position:"bottom"}):(n.weather.code=1,n.weather.realtime=e.data.result.realtime,n.weather.future=e.data.result.future[0])}})},loadingMsg:function(e){this.getLocation(),this.getTotallyPage();var n=this;n.imageUrlsArr=[],t.request({url:"http://zjhwork.xyz:8080/loadingMsg?currPage="+e,method:"Get",dataType:"json",success:function(e){for(var a=0;a<e.data.result.length;a++)e.data.result[a].content=e.data.result[a].content.replace(new RegExp("images/","g"),"http://zjhwork.xyz:8080/images/"),void 0!=e.data.result[a].imgUrl?(n.imageUrlsArr.push("http://zjhwork.xyz:8080/"+e.data.result[a].imgUrl),e.data.result[a].imgUrl=e.data.result[a].imgUrl.replace(new RegExp("/getImgById","g"),"http://zjhwork.xyz:8080/getImgById")):n.imageUrlsArr.push("http://zjhwork.xyz:8080/images/noPng.png");1==e.data.code?n.msgArr=e.data.result:t.showToast({title:"您还尚未登录，请登录",duration:2e3,position:"bottom",icon:"none"}),t.hideLoading()}}),t.request({url:"http://zjhwork.xyz:8080/findNickNameByUsername?username="+n.user.username,method:"Get",header:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(t){n.user.nickName=t.data.result[0].username}})},toLogin:function(){t.showToast({title:"还未登陆哦！请先登录~",duration:2e3,icon:"none"}),setTimeout(function(){t.redirectTo({url:"../login/login"})},1500)}}};e.default=d}).call(this,n("6e42")["default"],n("0de9")["default"])},e076:function(t,e,n){"use strict";var a=n("7176"),i=n.n(a);i.a},e9c6:function(t,e,n){"use strict";n.r(e);var a=n("b82e"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a}},[["58db","common/runtime","common/vendor"]]]);