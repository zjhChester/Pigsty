(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/cpimg/cpimg"],{"1b01":function(t,e,i){"use strict";i.r(e);var n=i("3af4"),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=r.a},"3af4":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=[],n="",r=0,a={name:"cpimg",props:{maxWidth:{type:Number,default:750},type:{type:String,default:"url"},ql:{type:Number,default:.92},src:{type:String,default:""},number:{type:Number,default:1},fixOrientation:{type:Boolean,default:!0},size:{type:Number,default:5e5}},data:function(){return{cWidth:750,cHeight:750}},onUnload:function(){},methods:{_changImg:function(){var e=this;""==e.src?t.chooseImage({count:1,sizeType:["compressed"],success:function(t){i=[],n=t.tempFilePaths,r=0,e._cpImg()},fail:function(t){e._err(t)}}):_cpImg(e.src)},_cpImg:function(){var e=this,i=n[r];function a(n,r){var a,o,s=n.width,h=n.height,u=1,c=1;(r/1024>=e.size||n.width>=e.maxWidth)&&(n.width>=n.height&&n.width>=e.maxWidth?(n.height=e.maxWidth*n.height/n.width,n.width=e.maxWidth):n.width<n.height&&n.height>=e.maxWidth&&(n.width=e.maxWidth*n.width/n.height,n.height=e.maxWidth),u=n.width/s,c=n.height/h),a=s*u,o=h*c;var d=t.createCanvasContext("_myCanvas",e);if(e.cWidth=n.width,e.cHeight=n.height,e.fixOrientation){var f=n.orientation;[5,6,7,8,"right","left","right-mirrored","left-mirrored"].indexOf(f)>-1&&(e.cWidth=n.height,e.cHeight=n.width),2==f||"up-mirrored"==f?(d.translate(a,0),d.scale(-1,1)):3==f||"down"==f?(d.translate(a,o),d.rotate(Math.PI)):4==f||"down-mirrored"==f?(d.translate(0,o),d.scale(1,-1)):5==f||"right-mirrored"==f?(d.rotate(.5*Math.PI),d.scale(1,-1)):6==f||"right"==f?(d.rotate(.5*Math.PI),d.translate(0,-o)):7==f||"left-mirrored"==f?(d.rotate(.5*Math.PI),d.translate(a,-o),d.scale(-1,1)):8==f||"left"==f?(d.rotate(-.5*Math.PI),d.translate(-a,0)):d.translate(0,0)}var l=0;l=10,setTimeout(function(){d.drawImage(i,0,0,a,o),d.draw(!1,function(){var i=0;i=10,setTimeout(function(){t.canvasToTempFilePath({width:Number(e.cWidth),height:Number(e.cHeight),destWidth:Number(e.cWidth),destHeight:Number(e.cHeight),canvasId:"_myCanvas",fileType:"jpg",quality:Number(e.ql),success:function(t){if("base64"==e.type){plus.io.resolveLocalFileSystemURL(t.tempFilePath,function(t){t.file(function(t){var i=new plus.io.FileReader;i.readAsDataURL(t),i.onloadend=function(t){2==t.target.readyState?e._result(t.target.result):e._err(t)}})},function(t){e._err(t)})}else e._result(t.tempFilePath)},fail:function(t){e._err(t)}},e)},i)})},l)}t.hideLoading(),t.showLoading({title:"图片压缩中 ".concat(r+1,"/").concat(n.length),mask:!0}),t.getImageInfo({src:i,success:function(n){t.getFileInfo({filePath:i,success:function(t){a(n,t.size)},fail:function(t){e._err(t)}})},fail:function(t){e._err(t)}})},_reverseImgData:function(t){for(var e=t.width,i=t.height,n=0,r=0;r<i/2;r++)for(var a=0;a<4*e;a++)n=t.data[r*e*4+a],t.data[r*e*4+a]=t.data[(i-r-1)*e*4+a],t.data[(i-r-1)*e*4+a]=n;return t},_getH5ImageInfo:function(t,e){var i=new Image;i.src=t,i.onload=function(i){var n=this,r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(t){var i=this;if(200==i.status||0===i.status){var r=new FileReader;r.onload=function(t){var r=new DataView(this.result);if(65496!=r.getUint16(0,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var a=r.byteLength,o=2;while(o<a){var s=r.getUint16(o,!1);if(o+=2,65505==s){if(1165519206!=r.getUint32(o+=2,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var h=18761==r.getUint16(o+=6,!1);o+=r.getUint32(o+4,h);var u=r.getUint16(o,h);o+=2;for(var c=0;c<u;c++)if(274==r.getUint16(o+12*c,h))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:r.getUint16(o+12*c+8,h)})}else{if(65280!=(65280&s))break;o+=r.getUint16(o,!1)}}return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1})},r.readAsArrayBuffer(i.response)}},r.send()}},_result:function(e,a){i.push(e),r+=1,n.length-1>=r?this._cpImg():(t.hideLoading(),this.$emit("result",i))},_err:function(e){t.hideLoading(),this.$emit("err",e)}}};e.default=a}).call(this,i("6e42")["default"])},"7e1f":function(t,e,i){"use strict";i.r(e);var n=i("c96f"),r=i("1b01");for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i("94ce");var o,s=i("f0c5"),h=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);e["default"]=h.exports},"94ce":function(t,e,i){"use strict";var n=i("ab42"),r=i.n(n);r.a},ab42:function(t,e,i){},c96f:function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"b",function(){return r}),i.d(e,"c",function(){return a}),i.d(e,"a",function(){return n})}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/cpimg/cpimg-create-component',
    {
        'components/cpimg/cpimg-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("7e1f"))
        })
    },
    [['components/cpimg/cpimg-create-component']]
]);
